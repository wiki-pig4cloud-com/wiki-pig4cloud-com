---
title: "pig token æœ‰æ•ˆæœŸåŠä¸ªæ€§åŒ–"
---

## â‘  é»˜è®¤ Token æœ‰æ•ˆæœŸè¯´æ˜


```plain
 // é»˜è®¤åˆ·æ–° token çš„æœ‰æ•ˆæœŸ
  private int refreshTokenValiditySeconds = 60 * 60 * 24 * 30; // default 30 days.
  // é»˜è®¤ token çš„æœ‰æ•ˆæœŸ
  private int accessTokenValiditySeconds = 60 * 60 * 12; // default 12 hours.
```



## â‘¡ ä¿®æ”¹ Token æœ‰æ•ˆæœŸ
:::info
æ¯ä¸ªç»ˆç«¯é…ç½®ä¸ºç©ºï¼Œå–é»˜è®¤çš„æ—¶é—´è®¾ç½® åˆ·æ–° token 30 å¤©ï¼Œä»¤ç‰Œ 12 å°æ—¶ã€‚

å‰ç«¯ä½¿ç”¨çš„å®¢æˆ·ç«¯æ˜¯ pigï¼Œè®¾ç½®ä»¤ç‰Œå¤±æ•ˆç­‰ã€‚

:::

![](https://cdn.nlark.com/yuque/0/2020/png/283679/1599314159653-f0977281-a56c-4ddf-bd2f-001db5f387b6.png)



## ğŸŒ‹ sys_oauth_client_details è¡¨
:::warning
ç»ˆç«¯ç®¡ç†åŠŸèƒ½å¯¹åº” sys_oauth_client_details è¡¨ï¼Œä¸ºè®¤è¯æˆæƒçš„æ ¸å¿ƒæ§åˆ¶è¡¨

:::

| å­—æ®µåç§° | æè¿° |
| --- | --- |
| client_id	 | ä¸»é”®ï¼Œå®¢æˆ·ç«¯ ID |
| resource_ids | å®¢æˆ·ç«¯æ‰€èƒ½è®¿é—®çš„èµ„æº id é›†åˆï¼Œå¤šä¸ªèµ„æºæ—¶ç”¨é€—å· (,) åˆ†éš” |
| client_secret | å®¢æˆ·ç«¯è®¿é—®å¯†åŒ™ |
| scope | å®¢æˆ·ç«¯ç”³è¯·çš„æƒé™èŒƒå›´ï¼Œå¯é€‰å€¼åŒ…æ‹¬ read,write,trust;è‹¥æœ‰å¤šä¸ªæƒé™èŒƒå›´ç”¨é€—å· (,) åˆ†éš” |
| authorized_grant_types | å®¢æˆ·ç«¯æ”¯æŒçš„æˆæƒè®¸å¯ç±»å‹ (grant_type)ï¼Œå¯é€‰å€¼åŒ…æ‹¬ authorization_code,password,refresh_token,implicit,client_credentialsï¼Œè‹¥æ”¯æŒå¤šä¸ªæˆæƒè®¸å¯ç±»å‹ç”¨é€—å· (,) åˆ†éš” |
| web_server_redirect_uri | å®¢æˆ·ç«¯é‡å®šå‘ URIï¼Œå½“ grant_type ä¸º authorization_code æˆ– implicit æ—¶ï¼Œåœ¨ Oauth çš„æµç¨‹ä¸­ä¼šä½¿ç”¨å¹¶æ£€æŸ¥ä¸æ•°æ®åº“å†…çš„ redirect_uri æ˜¯å¦ä¸€è‡´ |
| authorities | å®¢æˆ·ç«¯æ‰€æ‹¥æœ‰çš„ Spring Security çš„æƒé™å€¼ï¼Œå¯é€‰ï¼Œè‹¥æœ‰å¤šä¸ªæƒé™å€¼ï¼Œç”¨é€—å· (,) åˆ†éš” |
| access_token_validity | è®¾å®šå®¢æˆ·ç«¯çš„ access_token çš„æœ‰æ•ˆæ—¶é—´å€¼ (å•ä½ï¼šç§’)ï¼Œè‹¥ä¸è®¾å®šå€¼åˆ™ä½¿ç”¨é»˜è®¤çš„æœ‰æ•ˆæ—¶é—´å€¼ (60 * 60 * 12, 12 å°æ—¶) |
| refresh_token_validity | è®¾å®šå®¢æˆ·ç«¯çš„ refresh_token çš„æœ‰æ•ˆæ—¶é—´å€¼ (å•ä½ï¼šç§’)ï¼Œè‹¥ä¸è®¾å®šå€¼åˆ™ä½¿ç”¨é»˜è®¤çš„æœ‰æ•ˆæ—¶é—´å€¼ (60 * 60 * 24 * 30, 30 å¤©) |
| additional_information | è¿™æ˜¯ä¸€ä¸ªé¢„ç•™çš„å­—æ®µï¼Œåœ¨ Oauth çš„æµç¨‹ä¸­æ²¡æœ‰å®é™…çš„ä½¿ç”¨ï¼Œå¯é€‰ï¼Œä½†è‹¥è®¾ç½®å€¼ï¼Œå¿…é¡»æ˜¯ JSON æ ¼å¼çš„æ•°æ® |
| autoapprove | è®¾ç½®ç”¨æˆ·æ˜¯å¦è‡ªåŠ¨æ‰¹å‡†æˆäºˆæƒé™æ“ä½œï¼Œé»˜è®¤å€¼ä¸ºâ€˜falseâ€™, å¯é€‰å€¼åŒ…æ‹¬â€˜trueâ€™,â€˜falseâ€™, â€˜readâ€™,â€˜writeâ€™. |


## â¤  é—®é¢˜å’¨è¯¢
![](https://cdn.nlark.com/yuque/0/2022/gif/283679/1662563973685-c22e9831-db66-42b5-973f-886d25d1e0e7.gif)

