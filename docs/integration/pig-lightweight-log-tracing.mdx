---
title: "pig 整合轻量级日志链路追踪"
---

## 背景

在微服务里，业务出现问题或者程序出的任何问题，都少不了查看日志。一般我们使用 ELK 相关的日志收集工具，服务多的情况下，业务问题也是有些难以排查，只能确定大致时间定位相关日志。log-trace-spring-boot-starter 解决多个服务调用日志的问题，它可以将一个完整的调用链给整合为一个完整有序的日志。

## 微服务添加依赖

<Warning>
涉及的微服务都需要添加如下依赖
</Warning>

```xml
<dependency>
  <groupId>com.pig4cloud.plugin</groupId>
  <artifactId>log-trace-spring-boot3-starter</artifactId>
  <version>3.2.0</version>
</dependency>
```

## 观察日志变化

![日志变化示例1](/images/1649579261443-c1d745c2-12cd-4898-a868-2683ce2d2bde.png)

![日志变化示例2](/images/1649579250280-144471a8-a648-46f8-9a38-bd1361363d4f.png)

## 观察响应头 header 

![响应头示例](/images/1649657870210-c2dbc9a1-c464-4a65-918a-83b22f8ee899.png)

## 问题咨询

![问题咨询](/images/1662563973685-c22e9831-db66-42b5-973f-886d25d1e0e7.gif)

